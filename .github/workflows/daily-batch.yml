name: Daily Stock Price Update
# ì„¤ëª…: ë§¤ì¼ ì •í•´ì§„ ì‹œê°„ì— QuantGravity ì„œë²„ì˜ ë°ì¼ë¦¬ ë°°ì¹˜ APIë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

on:
  # 1. ìë™ ì‹¤í–‰ ìŠ¤ì¼€ì¤„ (UTC ê¸°ì¤€)
  schedule:
    # ì˜ˆ: í•œêµ­ ì‹œê°„ ì•„ì¹¨ 6ì‹œ = UTC 21:00 (ë¯¸êµ­ ì¥ ë§ˆê° í›„)
    - cron: '0 21 * * *' 
  
  # 2. ê¹ƒí—ˆë¸Œ ì›¹ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ ë²„íŠ¼ í‘œì‹œ
  workflow_dispatch:

jobs:
  trigger-update:
    runs-on: ubuntu-latest
    steps:
      - name: Wake up Server & Trigger Batch
        run: |
          echo "ğŸš€ ë°ì¼ë¦¬ ë°°ì¹˜ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤..."
          # curl ëª…ë ¹ì–´ë¡œ ë°±ì—”ë“œ API í˜¸ì¶œ (POST)
          # ì£¼ì†ŒëŠ” ìŠ¤íƒ€í¬ì˜ ì‹¤ì œ ë°±ì—”ë“œ ì£¼ì†Œë¡œ ë³€ê²½í•´ì•¼ í•´!
          curl -X POST https://quantgravity-backend.onrender.com/api/batch/daily-update-all \
          -H "Content-Type: application/json"